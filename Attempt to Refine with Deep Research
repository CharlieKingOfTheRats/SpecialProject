from flask import Flask, request, jsonify
from config import app
from models import Food, Style
import openai
import random

# Extensive Knowledge Base (Structured Prompt)
extensive_wine_knowledge = """
High-Quality Wines ($15-$25) Paired with American Favorites

Introduction: The following knowledge base presents a selection of high-quality wines in the $15‚Äì$25 range (avoiding bottom-shelf picks) that are widely available in U.S. liquor stores. Each wine is paired with a common American dish, with an explanation of why the pairing works ‚Äì touching on key factors like acidity, tannins, body, and sweetness. These recommendations are designed to be accessible (you can find these wines in major stores) yet a step above the bargain tier. We also outline ways to personalize these pairings, including filtering by your preferences, choosing wines by mood or occasion, incorporating feedback, and even using third-party data (e.g. Vivino or Wine-Searcher) to ensure availability.

Robust Red Wines for Hearty Dishes

Cabernet Sauvignon ‚Äì Bold Steakhouse Red
	‚Ä¢	Key Characteristics: Full-bodied red with high tannins and rich dark-fruit flavors (black currant, blackberry) often layered with oak (vanilla, smoke). A quality Cabernet in this range (often from California) typically has strong structure and ~14% alcohol, giving it a powerful presence Ôøº.
	‚Ä¢	Pairs With: Grilled steaks (ribeye, NY strip), juicy cheeseburgers, or lamb chops. Classic American steakhouse fare and backyard beef burgers alike shine with Cabernet. In fact, many steakhouses feature Napa Cabernet as a go-to for beef Ôøº, and experts note that Cabernet (and its blends) are among the best burger pairings (especially for loaded cheeseburgers) Ôøº.
	‚Ä¢	Why It Works: A well-structured Cab has the muscle to tangle with rich red meat. The firm tannins in the wine cut through the fat and protein of a marbled steak, while the meat‚Äôs fat softens the wine‚Äôs astringency ‚Äì a ‚Äúperfect symbiotic relationship in each bite,‚Äù as Food & Wine describes Ôøº. Additionally, the char on grilled beef mirrors the toasty oak notes in many Cabs, allowing the seared, smoky flavors in the food and wine to complement each other Ôøº. The wine‚Äôs dark fruit flavors also stand up to bold seasonings or condiments, lingering on the palate even after each bite Ôøº.
	‚Ä¢	Best Occasions: Ideal for formal dinners or celebrations where a classic prime rib or steak is the centerpiece. Yet Cabernet is equally at home in a casual setting ‚Äì it can elevate a cookout by pairing with gourmet burgers or grilled mushrooms, bringing steakhouse sophistication to a backyard BBQ Ôøº. This versatility makes it a great choice when you want a dependable ‚Äúbig red‚Äù that impresses across contexts.

Zinfandel ‚Äì Zesty BBQ Red
	‚Ä¢	Key Characteristics: Zinfandel (including its close cousin Primitivo) is a full-bodied red known for jammy berry fruit (raspberry, blackberry) and a kick of spice (pepper, cinnamon). It tends to have moderate tannins (softer than Cabernet) and medium-high acidity, with a lush, ripe character Ôøº Ôøº. Many Zinfandels from California also carry a touch of smoky oak and can be relatively high alcohol, which contributes to a warm, bold finish.
	‚Ä¢	Pairs With: Barbecue favorites like BBQ ribs, smoked brisket, pulled pork with tangy sauce, or even a classic pepperoni pizza. It‚Äôs a quintessential pick for American BBQ cuisine ‚Äì think 4th of July cookouts or tailgate parties. A rich California Zin brimming with raspberry/blackberry fruit and spice is terrific alongside a cheeseburger and fries as well Ôøº, or any grilled fare that has a sweet or spicy glaze.
	‚Ä¢	Why It Works: Zinfandel‚Äôs plush fruit and spice-forward profile can stand up to sweet-spicy barbecue sauces and charred meats. Its mild tannins and good acidity balance the strong flavors of smoked/barbecued dishes, and help cut through fatty, flavorful cuts. In fact, bold reds like Zinfandel (or Shiraz) are ‚Äúbold enough to drink alongside foods brushed with heavily spiced BBQ sauce‚Äù Ôøº ‚Äì the wine‚Äôs ripe fruit complements the smoke and spice rubs. For pepperoni pizza, a medium-bodied Zin with enough acidity will balance the pepperoni‚Äôs spiciness and the tomato sauce‚Äôs acidity Ôøº, while the wine‚Äôs peppery undertones echo the pizza‚Äôs spice. (One tip: if a BBQ sauce is extremely sugary, it can clash with the wine‚Äôs fruit ‚Äì a moderately sweet, smoky sauce works best, as overly sweet sauces can throw off the wine‚Äôs balance Ôøº.)
	‚Ä¢	Best Occasions: Perfect for a casual BBQ or cookout ‚Äì Zinfandel screams summer gatherings and barbecue competitions. It‚Äôs a fun, crowd-pleasing red for outdoor parties, chili cook-offs, or pizza nights. Because it‚Äôs robust but not too fussy, you can bring Zinfandel to a weekend backyard gathering, a game-day party (think ribs and pizza), or any event where classic American comfort foods are on the menu.

Malbec ‚Äì Smooth & Spicy Grill Red
	‚Ä¢	Key Characteristics: Malbec (especially popular from Argentina, though also made in CA and France) is a full-bodied red with a velvety texture. It offers ripe dark fruit flavors like plum, blackberry, and often notes of cocoa or sweet tobacco. Tannins in Malbec are present but typically softer and rounder than Cabernet, and it usually has moderate acidity. Many Malbecs in the $15‚Äì$25 range are crowd-friendly: fruit-forward, with a hint of spice and oak, and a smooth finish.
	‚Ä¢	Pairs With: Barbecue and grilled meats of all kinds. Malbec‚Äôs heritage as the go-to wine for Argentine asado (grilled beef) makes it a natural pairing for an American mixed grill platter: think BBQ pork ribs with sweet-spicy sauce, grilled sirloin or brisket, and even burgers with barbecue sauce. It‚Äôs also excellent with chili con carne or saucy, smoked meats (like Texas-style brisket or burnt ends). Essentially, any rich, smoky protein that you‚Äôd slather in BBQ sauce or serve with spicy seasonings is a great match for Malbec.
	‚Ä¢	Why It Works: Malbec is bold enough to hold its own against heavily spiced or charred meats, but it‚Äôs also inherently smooth, which helps it not overpower the food. Its ample dark fruit and spice notes ‚Äúare bold enough to drink alongside foods brushed with heavily spiced barbecue sauces‚Äù Ôøº. The wine‚Äôs fruitiness can echo the sweetness in a BBQ sauce, and its spice (sometimes a black pepper or cocoa note) complements smoky, peppery rubs. Meanwhile, Malbec‚Äôs softer tannin structure means if your sauce has a bit of sweetness, the wine won‚Äôt turn harsh ‚Äì it maintains a plush, easy-drinking quality. (As with Zinfandel, just avoid sauces that are too sugary, as those can dominate even a robust wine Ôøº.) Overall, Malbec‚Äôs balance of richness and smoothness allows it to enhance grilled flavors without bitterness, and the acidity is enough to refresh your palate between bites of fatty meat.
	‚Ä¢	Best Occasions: Malbec is a terrific choice for a casual cookout or weeknight grilling, when you want a red that feels a bit special but is very easy to drink. It‚Äôs often a hit at BBQ parties, family reunions with a smoker going, or watching the game with a plate of wings and ribs. Malbec can also transition nicely into a slightly more formal setting ‚Äì for example, serve a quality Malbec at a steak dinner or to accompany hearty Tex-Mex dishes at a dinner party, and you‚Äôll likely get compliments on the pairing.

Pinot Noir ‚Äì Light & Versatile Red
	‚Ä¢	Key Characteristics: Pinot Noir is a light to medium-bodied red with comparatively low tannins and higher acidity. It typically showcases red fruit flavors (cherry, cranberry, raspberry) and often earthy or floral notes (mushroom, forest floor, rose). A good Pinot in this price range (often from Oregon, California, or Burgundy‚Äôs regional appellations) will be smooth and aromatic, with a silky texture and subtle spice. It‚Äôs less heavy and intense than the big reds above, making it very food-friendly.
	‚Ä¢	Pairs With: Lighter meats and savory dishes. Roast chicken or turkey, pork tenderloin, glazed ham, and even grilled salmon are classic pairings. Pinot Noir‚Äôs gentle touch with tannin means it can even pair with meats that traditional big reds might overpower ‚Äì for example, it‚Äôs often ‚Äúdelicious alongside salmon‚Äù Ôøº (proving that red wine can go with fish). It‚Äôs great with dishes featuring mushrooms or herbs, like a mushroom pizza, herbed pork roast, or Thanksgiving stuffing. Pinot Noir also works with burgers or meatloaf that aren‚Äôt overly heavy; in the book Big Macs & Burgundy, author Vanessa Price famously pairs a Big Mac with Pinot Noir, highlighting its versatility with everyday fare.
	‚Ä¢	Why It Works: The beauty of Pinot Noir is its balance of delicacy and depth. Because it‚Äôs lighter-bodied and lower in tannin, it won‚Äôt dry out your mouth or overwhelm more delicate flavors in a dish. Yet it has enough acidity and savory nuance to complement richer foods. For example, recipes with earthy ingredients (mushrooms, truffles, lentils) ‚Äútaste great with reds like Pinot Noir‚Ä¶ which [is] light-bodied but full of savory depth‚Äù Ôøº ‚Äì the wine‚Äôs subtle earthiness mirrors those flavors. Pinot‚Äôs acidity is high enough to cut through some fat (say, the skin of a roast chicken or the richness of salmon), keeping your palate refreshed. And while it‚Äôs gentle, it does have some tannin and body, so it can pair with lean red meats or game without getting lost Ôøº. In short, Pinot Noir is all about elegance: it lifts and complements food flavors rather than dominating them.
	‚Ä¢	Best Occasions: Excellent for a romantic dinner or any occasion where you want a classy, lighter touch. Pinot Noir sets a refined mood ‚Äì imagine a candlelit dinner of grilled salmon or a Thanksgiving table with roast turkey and cranberry sauce (Pinot‚Äôs cranberry-like notes are a natural fit). It‚Äôs also a go-to for wine lovers at holiday meals (like Thanksgiving or Christmas turkey/ham) because it pairs with the diverse side dishes on the table. Whenever the meal has complexity or a mix of lighter proteins and savory sides, Pinot Noir is a harmonious choice.

Merlot ‚Äì Smooth & Approachable Red
	‚Ä¢	Key Characteristics: Merlot is a medium-bodied to full-bodied red that offers plush fruit flavors (plum, black cherry, blackberry) with moderate tannins and acidity. In general, Merlot is known for a softer, smoother profile compared to Cabernet ‚Äì it often has a velvety mouthfeel and a round, juicy character. Many quality Merlots (e.g. from Washington State or California) feature subtle oak spice (mocha, vanilla) but emphasize fruit and a balanced structure. This inherent balance makes Merlot very versatile. In fact, Merlot is often described as a ‚Äúversatile, food-friendly wine‚Äù due to its medium body and moderated tannin-acid profile Ôøº.
	‚Ä¢	Pairs With: A wide range of foods ‚Äì Merlot‚Äôs versatility is one of its strengths. Great with beef burgers (a classic juicy hamburger is often cited as a perfect match for Merlot) Ôøº, meatloaf, and moderately heavy beef dishes. It also pairs nicely with pork (grilled pork chops, pulled pork sandwiches) and lamb. Merlot‚Äôs softer edge means it can match with dishes that have a bit of sweetness or spice, like barbecue chicken pizza or pasta with tomato-based sauce. In fact, one winery pairing guide touts Merlot‚Äôs ability to complement everything from mushroom pizza to pulled pork and even steak quesadillas Ôøº. It‚Äôs also enjoyable with roast chicken or turkey, especially if served with herb gravy or cranberry (Pinot isn‚Äôt the only red for Thanksgiving!). Even some richer seafood like seared tuna can work with Merlot if the wine is on the lighter side.
	‚Ä¢	Why It Works: With Merlot, balance is key. It has enough body and tannin to stand up to red meat (for example, a good Merlot has the structure to handle a steak or lamb chop, much like a Cabernet, in the right conditions Ôøº), but its tannins are usually gentler, which helps when there are sweeter glazes, tomato sauces, or less fatty proteins involved. Merlot‚Äôs moderate acidity and plush fruit mean it can pair with both savory and slightly sweet elements. For instance, the wine‚Äôs black cherry/plum notes and subtle spice can play off the smokiness of barbecue sauce or the umami of grilled mushrooms, without the pairing turning bitter. One reason a burger with ketchup works with Merlot is that Merlot tends to be ripe and ‚Äúripe = good‚Äù when matching a bit of sweetness in the condiments Ôøº Ôøº. Additionally, Merlot often has herbal or cocoa hints that complement American comfort foods (think of herbs in meatloaf or the cocoa/chili in a mole-style BBQ rub). Because it‚Äôs neither too heavy in tannin nor too light in body, Merlot finds the middle ground, making it ‚Äúa good option to pair with a wide range of foods‚Äù due to its medium body and moderate structure Ôøº.
	‚Ä¢	Best Occasions: Merlot is a trusty ‚Äúeveryday‚Äù red for dinner ‚Äì if you‚Äôre not sure what to open on a weeknight, Merlot‚Äôs likely to please with whatever is on the table. It‚Äôs great for cookouts and casual dinners (burgers, sliders, pizza night) where you want a red wine that everyone will find approachable. At the same time, a nice Merlot can be served at a nice dinner party or holiday meal to impress guests who might prefer a smoother red; it‚Äôs often a crowd-pleaser even for those who don‚Äôt typically drink big reds. From a backyard BBQ to a potluck supper, Merlot‚Äôs friendly character fits most occasions that call for red wine without too much fuss.

Crisp White Wines for Lighter Fare

Sauvignon Blanc ‚Äì Fresh & Zesty White
	‚Ä¢	Key Characteristics: Sauvignon Blanc is typically a light-bodied to medium-bodied dry white with high acidity and bright, citrus-forward flavors. Common notes include lemon, grapefruit, green apple, and often herbal or grassy nuances (think bell pepper, cut grass, or basil, especially in New World Sauvignon Blanc like New Zealand‚Äôs). It is almost always unoaked, emphasizing crispness and aromatics. A $15‚Äì$20 Sauvignon Blanc (e.g. from Marlborough NZ, California, or the Loire Valley) will be refreshing, aromatic, and tangy on the palate.
	‚Ä¢	Pairs With: Dishes that have bright, tangy flavors or green herbs. It‚Äôs fantastic with salads ‚Äì for instance, a goat cheese salad or a Caesar salad with tangy dressing, as the wine matches the tart vinaigrette and cuts through creamy cheese. Sauvignon Blanc is a go-to with seafood, especially shellfish and white fish prepared with citrus or herbs (e.g. grilled shrimp with lemon, fish tacos with cilantro, ceviche, or oysters with mignonette). It also pairs nicely with goat cheese (a classic pairing) and vegetables like asparagus or artichokes, which are notoriously tricky for wine but fare well with SB. Essentially, if a dish has a lot of fresh herbs, citrus, or a vinegar-based sauce, Sauvignon Blanc is a top choice.
	‚Ä¢	Why It Works: The hallmark high acidity in Sauvignon Blanc is what makes it so food-friendly with tart or vegetal foods. A mouthwatering Sauvignon will stand up to acidic dressings and sauces ‚Äì ‚Äútangy foods‚Ä¶won‚Äôt overwhelm zippy wines like Sauvignon Blanc‚Äù Ôøº. Instead, the wine‚Äôs acidity can mirror the tartness in, say, a lemony dressing, matching tang for tang, so both the wine and food taste balanced. The citrus and green flavors in the wine also complement herbal, green ingredients (imagine a sip of grapefruit-y SB with a bite of salad with dill and goat cheese ‚Äì the flavors echo and lift each other). Additionally, the lack of oak and lighter body mean SB won‚Äôt overpower delicate foods like white fish; rather, it adds a burst of freshness and cleanses the palate after each bite of something like buttery fish or briny oysters. Sauvignon Blanc basically ‚Äúresets‚Äù your palate with each sip due to its acidity, which is great with any dish that is oily or rich in umami. And when paired with something like goat cheese, the wine‚Äôs sharpness cuts the creamy fat and its herbal notes meld with the cheese‚Äôs tang. It‚Äôs a beautiful example of a wine that highlights the food flavors while refreshing you.
	‚Ä¢	Best Occasions: Perfect for casual lunches, picnics, or light dinners. Sauvignon Blanc is often a daytime wine ‚Äì think brunch pairing (e.g. goat cheese omelette) or a picnic of salads and crudit√©s. It‚Äôs also a nice aperitif wine to start an evening, served with appetizers like cheeses, spinach-artichoke dip, or shrimp cocktail. On a hot summer day, a cold Sauvignon Blanc is immensely satisfying, so consider it for outdoor gatherings and BBQs as a white option (it can be lovely with grilled vegetable skewers or herb-marinated grilled chicken). Whenever the mood or food calls for something crisp, bright, and uplifting, Sauvignon Blanc answers.

Chardonnay ‚Äì Rich & Buttery (or Crisp & Unoaked) White
	‚Ä¢	Key Characteristics: Chardonnay is a bit of a chameleon ‚Äì its style can range from rich and buttery (with oak aging and malolactic creaminess) to crisp and steely (unoaked). Widely available Chardonnays in the $15‚Äì$25 range from California often have a medium to full body, with flavors of apple, ripe pear, tropical fruit, and depending on style, buttery or vanilla oak notes. They generally have moderate acidity (not as zingy as Sauvignon Blanc) and a smooth finish. Cooler-climate or unoaked Chardonnays (like some from Carneros, Chablis, or Washington) will be more citrusy and minerally; warmer climate or heavily oaked versions (Napa, Sonoma, etc.) will be creamier and spicier.
	‚Ä¢	Pairs With: Rich, creamy dishes or fatty seafood. Classic American pairings include lobster with drawn butter, crab cakes, or fettuccine Alfredo ‚Äì essentially, Chardonnay loves anything in a butter or cream sauce. A buttery roast chicken or turkey is wonderful with a like-minded Chardonnay as well. For example, a warm-climate, barrel-aged Chardonnay can even pair with a juicy steak topped with herb butter, but it truly shines with fatty fish: Food & Wine notes that ‚Äúsilky‚Äù Chardonnays go well with hearty fish like swordfish or any seafood in a rich sauce Ôøº. So think salmon with cream sauce, halibut with beurre blanc, or even New England clam chowder. If you have an unoaked, crisper Chardonnay, it will also pair nicely with macaroni and cheese or dishes like lobster rolls, where its apple-y freshness cuts the richness. (For a loaded lobster mac & cheese, a ‚Äúposh‚Äù white Burgundy (Chardonnay) is often recommended Ôøº.)
	‚Ä¢	Why It Works: Chardonnay‚Äôs pairing strength lies in its body matching and flavor mirroring. A full-bodied, creamy Chardonnay aligns with the weight of creamy or buttery dishes ‚Äì it‚Äôs like pairing like with like. One expert notes that an unoaked Chardonnay works great with simple creamy mac and cheese because ‚Äúthe rich flavor [of the wine] mirrors the rich, cheesiness of the dish‚Äù Ôøº. When both the wine and the food have a buttery element, they can complement each other rather than one making the other taste odd. At the same time, acidity is crucial: a good Chardonnay still has enough acidity to cut through the fat in the dish Ôøº. That acidity prevents the pairing from being cloying, cleansing the palate after each creamy bite. For example, a bite of lobster in butter sauce followed by a sip of Chardonnay with a citrusy backbone will wash away the butter and ready you for another bite ‚Äì without that acidity, the combination might feel too heavy. Oak-aged Chardonnays also often bring vanilla, toast, or nutty flavors which can add complexity when paired with roasted or grilled flavors (think of the toasty edges of a grilled chicken or the nuttiness of browned butter ‚Äì the wine can reflect those notes). In short, Chardonnay can either match richness (butter with butter) or, if in a leaner style, provide a refreshing contrast to richness, making it a flexible pairing partner for many American classics that are creamy, cheesy, or buttery.
	‚Ä¢	Best Occasions: Chardonnay is a staple for dinner parties and formal dinners where a white wine is preferred with an indulgent dish (like a rich seafood course or creamy pasta). It‚Äôs often the white wine of choice at holiday meals ‚Äì for instance, Thanksgiving turkey with gravy and sides pairs wonderfully with a balanced Chardonnay. A lighter, unoaked Chardonnay is great for a weekday dinner of roast chicken or even take-out rotisserie chicken and veggies, providing a touch of elegance. And if you‚Äôre having a summer gathering like a lobster boil or crab feast, a chilled Chardonnay (especially an oak-influenced California one) fits the bill, matching the decadence of drawn butter and Old Bay seasoning. Essentially, choose Chardonnay when the meal has some weight or richness, and you want a reliable wine that can match that comfort factor.

Riesling (Off-Dry) ‚Äì Sweet Heat Tamer
	‚Ä¢	Key Characteristics: Riesling is a high-acid white known for its floral and stone-fruit aromatics (peach, apricot, jasmine, citrus). It can be made in styles ranging from bone-dry to very sweet. For pairing with spicy American foods, an off-dry Riesling is ideal ‚Äì that means it has a slight touch of sweetness (usually labeled Kabinett or Sp√§tlese from Germany, or just off-dry from domestic producers). In the $15‚Äì$25 range you can find excellent off-dry Rieslings from Washington State, New York‚Äôs Finger Lakes, or Mosel, Germany. Expect a light-bodied wine, with a slight sweetness on entry that is balanced by crisp acidity, and perhaps ~8‚Äì11% alcohol (often lower than other wines, which is also helpful with spice).
	‚Ä¢	Pairs With: Spicy and spicy-sweet foods ‚Äì this is the wine to grab for Buffalo hot wings, spicy barbecue sauces, Nashville hot chicken, or even spicy Asian-influenced dishes like General Tso‚Äôs chicken or chili-spiced tacos. In the American context, Buffalo chicken wings are iconic: an off-dry Riesling or its aromatic cousins Gew√ºrztraminer or Chenin Blanc are top picks for wing night Ôøº. Riesling also pairs nicely with glazed ham (where the sweetness of the glaze echoes in the wine) and with Fiery Tex-Mex or Cajun dishes. Anytime you have a dish that makes you think ‚Äúthis might be great with a cold beer or something sweet to cool it down,‚Äù Riesling is a great wine alternative.
	‚Ä¢	Why It Works: Off-dry Riesling succeeds by providing a counterpoint to heat and a refresher to the palate. The slight residual sugar in the wine acts to soothe spicy heat on your tongue ‚Äì as sommelier Sarah Tracey explains, ‚Äúthe natural sugars in [slightly sweet] wine help to temper the heat‚Äù of spicy wings Ôøº. At the same time, Riesling‚Äôs very high acidity keeps it lively and refreshing (not cloying), so each sip not only cools the burn but also cuts through the buttery, vinegary wing sauce. An expert sommelier notes that with Buffalo sauce, ‚Äúthe goal is a balancing act between the butter in the sauce and the body in the wine, and between sweet and spicy‚Äù Ôøº. Off-dry Riesling hits that balance: it typically has enough body and ‚Äúva-va-voom‚Äù flavor to stand up to a rich, spicy sauce, and crucially, a hint of sweetness to cool off the heat Ôøº. In addition, the aromatic notes of Riesling (like citrus, peach) can complement the tangy vinegar and chili flavors in hot wings (citrusy Riesling with cayenne and butter ‚Äì oddly harmonious!). Wine Enthusiast also notes that off-dry Chenin Blanc or Gew√ºrztraminer perform similarly, with Chenin‚Äôs bright citrus and acidity able to ‚Äúwipe that buttery sauce clean‚Äù off your palate after each bite Ôøº. In summary, a slightly sweet Riesling creates a sweet-and-spicy harmony: it douses the flames just enough, while its acidity and flavor keep the pairing exciting and not one-note.
	‚Ä¢	Best Occasions: Game day or party with spicy food ‚Äì if you‚Äôre doing a Super Bowl spread with Buffalo wings, hot dips, or spicy chili, off-dry Riesling will surprise and delight your guests more than the usual beer. It‚Äôs also a great pick for a takeout night if you‚Äôve ordered something like spicy Thai curry or hot Nashville-style chicken sandwiches; the wine will elevate the meal. Off-dry Riesling can also play well at holiday meals that have sweeter elements ‚Äì for example, alongside a honey-glazed ham at Easter, or with a spicy-sweet BBQ sauce at a 4th of July picnic. It‚Äôs a fun, slightly unconventional choice that shows you know how to pair for flavor intensity. And because Riesling is often lower in alcohol, it‚Äôs a nice option for long, casual gatherings where people might appreciate a lighter sip between bites of flavorful food.

Pinot Grigio (Pinot Gris) ‚Äì Light & Easy White
	‚Ä¢	Key Characteristics: Pinot Grigio is typically a light-bodied, dry white wine with mild acidity (medium-high) and subtle fruit flavors. Italian Pinot Grigio (the most common on U.S. shelves) often tastes of delicate citrus (lemon, lime), green apple, and sometimes a faint almond or mineral note. It‚Äôs usually unoaked and straightforward, with a clean finish. Some Pinot Gris from Oregon or Alsace can have a bit more body and spice, but generally in the $15‚Äì$20 range, expect a crisp, simple white that‚Äôs all about refreshment and not overpowering the palate.
	‚Ä¢	Pairs With: Light dishes that won‚Äôt overwhelm this wine‚Äôs subtlety. It‚Äôs excellent with white fish and seafood prepared simply ‚Äì e.g. grilled tilapia with lemon, steamed clams, or cod with herbs. It also pairs with fresh salads, light pastas (like pasta primavera or lemon-garlic shrimp pasta), and vegetarian dishes. Because it‚Äôs so gentle, Pinot Grigio can accompany appetizers like crudit√©s, light cheeses, or even just stand on its own as a sipping wine before dinner. One classic pairing is Pinot Grigio with shellfish; another is with lightly seasoned fish tacos or ceviche, where the wine‚Äôs lime notes complement the dish. Essentially, if the food is delicate, summery, or mildly flavored, Pinot Grigio is a fitting partner.
	‚Ä¢	Why It Works: Pinot Grigio works by not overwhelming light foods and by providing a crisp contrast to delicate flavors. A general rule is that ‚Äúlight seafood dishes seem to take on more flavor when matched with equally delicate white wines, such as Pinot Grigio‚Äù Ôøº. Because PG doesn‚Äôt have strong oak or very bold flavors, it allows the taste of a simple dish (like a piece of sole with a squeeze of lemon) to shine, while adding just a touch of fruity sweetness and acidity. Its acidity, while not searing, is sufficient to cut through a bit of oil or dressings ‚Äì for instance, in a light salad with olive oil, Pinot Grigio‚Äôs slight tartness will refresh the palate. If you squeeze lemon on your seafood, PG‚Äôs citrus notes echo that and bridge nicely. Unlike a big Chardonnay, which could dominate a lightly flavored dish, Pinot Grigio stays in the background as a polite companion, enhancing rather than changing the food‚Äôs taste. This makes it a safe bet for palates that prefer a simple, clean wine or when serving a brunch or lunch where heavy wines would be out of place.
	‚Ä¢	Best Occasions: Summer gatherings and daytime meals. Pinot Grigio is wonderful on a warm afternoon ‚Äì at a picnic, beach day, or pool party (in a plastic cup, even, it‚Äôs still enjoyable!). It‚Äôs also a common choice for wedding showers or brunches, where its low-key profile appeals to many and complements lighter fare. If you‚Äôre hosting a casual lunch (chicken salad sandwiches, fruit platters, etc.), Pinot Grigio is an easy pick. Basically, reach for this wine when you want something unfussy, refreshing, and crowd-pleasing to go with lighter foods or appetizers.

Ros√© and Sparkling Wines for Versatility & Celebration

Dry Ros√© ‚Äì Versatile All-Rounder
	‚Ä¢	Key Characteristics: Dry ros√© wines (Provence-style or similar) combine some qualities of red and white. They are typically light to medium-bodied, with refreshing acidity like a white wine, but also carry red-fruit flavors (strawberry, watermelon, cherry) from the red grapes used. In the $15‚Äì$25 range, you can find excellent dry ros√©s from Provence, Southern Rh√¥ne, California, or Oregon. They usually are unoaked and have a crisp, dry finish ‚Äì not sweet, despite the fruity aromas.
	‚Ä¢	Pairs With: A wide range of foods, earning ros√© the reputation of a picnic and dinner-table champion. Ros√© pairs well with cheesy dishes and creamy sauces ‚Äì for example, a baked macaroni and cheese or cheese-based casseroles. (Ros√©‚Äôs acidity cuts through the richness, and its fruit complements the salty cheese.) It‚Äôs also fantastic with charcuterie and cured meats, making it great for pepperoni pizza or a platter of sausages and cheeses. Grilled seafood (like grilled shrimp or salmon) and salads (Nicoise salad, cobb salad) also work with ros√©. In general, when you have a mix of foods or a potluck, dry ros√© is a safe bet because it can handle a bit of spice, a bit of fat, and a bit of sweetness all in one meal. As Food & Wine notes, ‚Äúalmost all cheeses pair well with dry ros√©, which has the acidity of white wine and the fruit character of red‚Äù Ôøº ‚Äì and it also mentions ros√© works with grilled fish, fresh salad, and charcuterie for the same reason.
	‚Ä¢	Why It Works: Ros√©‚Äôs strength is its balance. Because it sits in between red and white in style, it has enough body and red-fruit flavor to handle more robust ingredients (like ham, barbecue, or tomato-based dishes) yet enough crispness and subtlety to not overpower lighter fare. The acidity in a dry ros√© is akin to that of a Sauvignon Blanc or Pinot Grigio, so it will cut through oily or creamy textures, cleansing the palate (imagine ros√© with a bite of cheesy pasta ‚Äì it refreshes like a squeeze of lemon would). At the same time, the gentle tannins and fruity notes (from the red grapes) give a bit of structure and sweetness of flavor that pairs with savory proteins. For instance, ros√© with grilled herb chicken: the wine‚Äôs berry notes add a sweet contrast to the savory herbs, and its acid handles any olive oil or marinade. Or ros√© with charcuterie: the saltiness of cured meats is balanced by a hint of fruity roundness in the wine (similar to how some people like melon with prosciutto). In summary, dry ros√© is often called a ‚Äúuniversal pairing wine‚Äù ‚Äì its mix of acidity and light red-fruit flavor means it can complement everything from a goat cheese salad to a slice of pepperoni pizza without missing a beat Ôøº.
	‚Ä¢	Best Occasions: Picnics, barbecues, and outdoor parties ‚Äì ros√© is practically made for summer entertaining. Serve it at a 4th of July picnic alongside burgers, hot dogs, pasta salad, and watermelon; it will go with almost all of it. It‚Äôs also a lovely choice for a ‚Äúgirls‚Äô night‚Äù in or daytime celebrations like bridal showers or pool parties, given its festive pink hue and broad appeal. Dry ros√© can be quite elegant, too ‚Äì a fine Proven√ßal ros√© at a garden dinner party with mixed grilled veggies, seafood, and cheese plates can really tie the meal together. Essentially, whenever you have a mix of dishes or a festive atmosphere and you want one wine that can please many palates, a chilled dry ros√© is the answer.

Brut Sparkling Wine ‚Äì Bubbly for Salty & Fried Foods
	‚Ä¢	Key Characteristics: Brut sparkling wines (whether Champagne, Cava, American sparkling, or Prosecco brut) are defined by their bubbles and high acidity. A brut will be dry (very little sugar), though many have a subtle impression of ripe fruit. Common flavor notes: green apple, lemon, toast/yeast (especially in traditional method sparklers like Champagne or good California sparkling). They are light to medium-bodied and of course, effervescent. In the $15‚Äì$25 category, you‚Äôre looking at quality Cava from Spain, Italian Prosecco (many are a bit less dry, but brut versions exist and often have pear/flower notes), or domestic sparklers (like California or New Mexico, e.g. Gruet, which offer Champagne-like character on a budget). These wines are crisp, lively, and palate-cleansing.
	‚Ä¢	Pairs With: Salty, fried, or rich foods ‚Äì a perhaps surprising secret of wine pairing is that sparkling wine is one of the best matches for classic American junk food! Fried chicken and Champagne is a famous combo; in general, anything deep-fried (French fries, fried chicken tenders, potato chips) is fantastic with brut bubbly. The salt and fat in the food reach an ideal contrast with the high acidity and bubbles. Sparkling is also great with popcorn (butter or truffle popcorn), pretzels, or basically your favorite bar snacks. On the more refined side, brut sparkling pairs with salty caviar or roe (hence the luxurious pairing of Champagne and caviar), with fried seafood (like calamari, tempura shrimp), and with creamy, rich appetizers (bubbly cuts through a creamy artichoke dip or deviled eggs). It‚Äôs also commonly served with wedding cake or sweets at celebrations, though for very sweet desserts a demi-sec sparkler would be better; brut truly shines with savory salty fare.
	‚Ä¢	Why It Works: The effect of a dry sparkling wine on the palate is like a squeeze of lemon plus a splash of soda ‚Äì it‚Äôs both acidic and carbonated, which is a double win for pairing with rich, salty foods. The acidity in brut bubbly scrapes the palate clean of fat (very similar to how high acid in any wine helps with fatty foods) and the bubbles physically lift and refresh the palate, preventing flavor fatigue. As Food & Wine puts it, ‚Äúmany dry sparkling wines‚Ä¶ have a faint touch of fruity sweetness, making them extra-refreshing with salty foods. They also cut through the richness and oil of fried dishes‚Äù Ôøº. In practice, take a crunchy, salty potato chip and follow with a sip of Champagne ‚Äì the wine‚Äôs tiny bubbles and acids dissolve the salt and scrub away the oil, and that whisper of fruit in the wine (apple/pear) gives a satisfying contrast to the salt. It‚Äôs an addictive contrast that keeps you coming back for more of both. Sparkling wine‚Äôs yeasty, toasty notes (especially in traditional method wines like Cava or California brut) can even accentuate the flavors in something like fried chicken ‚Äì think of the golden, bready crust on the chicken and how the wine‚Äôs brioche notes mirror it. Meanwhile, the wine‚Äôs effervescence keeps your mouth from feeling greasy or heavy. Overall, brut sparkling acts as a palate cleanser and flavor amplifier with salty, fried foods, which is why sommeliers often quip that ‚ÄúChampagne goes with everything.‚Äù It‚Äôs certainly one of the most flexible, especially for hors d‚Äôoeuvres and snacks.
	‚Ä¢	Best Occasions: Celebrations and formal events are the obvious ones ‚Äì anytime there‚Äôs a toast (weddings, New Year‚Äôs, graduations), a brut sparkling is likely involved. But don‚Äôt hesitate to bring out the bubbly for lowbrow pairings too: a movie night with popcorn and potato chips becomes so much more fun with some crisp sparkling wine. It‚Äôs also a great starter for a dinner party: serve brut bubbly with a cheese board or passed appetizers as guests arrive to kick things off. For a Sunday brunch, mimosas (orange juice + brut sparkling) are a staple, proving how well bubbly goes with brunch fare like waffles, bacon, and eggs. Essentially, brut sparkling wines are the go-to for any festive mood or when you have a spread of finger foods ‚Äì they‚Äôll elevate the experience and refresh everyone‚Äôs palate.

‚∏ª

Mood-Based Pairing Recommendations

Wines can also be recommended based on the occasion or mood. Below are a few structured categories with pairings tailored to each scenario. These suggestions draw from the wines above, focusing on what fits the vibe:

üç∑ Romantic Dinner

For an intimate, elegant dinner, choose wines that are refined and not too heavy, to allow conversation (and romance!) to flow:
	‚Ä¢	Pinot Noir with Herb-Crusted Salmon or Duck Breast: A silky Oregon or California Pinot Noir is perfect for a candlelit dinner. Its light body and romantic red-fruit aroma set a sophisticated tone. Pair it with seared salmon, roasted duck, or a mushroom risotto for a combination that is luxurious but not overwhelming. The Pinot‚Äôs gentle tannins and earthy notes will complement the dish without stealing the spotlight, creating a harmonious, sensual experience Ôøº. This pairing whispers elegance ‚Äì great for anniversaries or date nights when you want something special but smooth.
	‚Ä¢	Brut Champagne (or Sparkling Ros√©) as an Aperitif and with Light Apps: Nothing says romance like bubbly. Start the evening with a chilled brut Champagne or a quality domestic sparkling wine. Enjoy it alongside oysters on the half shell, a light cheese and fruit plate, or blini with caviar if you‚Äôre splurging. The crisp bubbles and toastiness cleanse the palate and add a celebratory note to the meal Ôøº. If serving a main course like a creamy pasta or chicken in sauce, you can even carry the Champagne through dinner ‚Äì its acidity and finesse will elevate the meal. Alternatively, a sparkling ros√© can add a lovely ros√©-petal pink hue to the table and bring subtle berry notes to pair with dishes like tuna tartare or grilled prawns. The effervescence keeps the mood lively and intimate.
	‚Ä¢	Full-Bodied Red for a Steakhouse-Style Date (if desired): If your idea of romance is sharing a big, juicy steak, by all means uncork a Cabernet Sauvignon. A Napa Cab or Washington Cabernet-Merlot blend provides that plush depth and long finish suited for savoring over a long dinner Ôøº. Enjoy it with a perfectly grilled filet mignon or New York strip for a classic ‚Äúdate night‚Äù indulgence. The key is to decant the wine and maybe have it with the later courses (so the initial ambiance isn‚Äôt too heavy). As noted, the Cab will make the flavors linger and enhance the char of the steak Ôøº ‚Äì wonderful for a special night out (or in). Follow it with a chocolate dessert and you have a romantic feast.

üçî Casual BBQ or Game Day

When the mood is laid-back, fun, and maybe a bit messy (think barbecue sauce and picnic tables), opt for wines that are bold, fruity, and crowd-pleasing. These pairings can stand up to intense flavors and won‚Äôt break the bank:
	‚Ä¢	Zinfandel with BBQ Ribs and Burgers: For a backyard BBQ, Zinfandel is a rockstar. Its jammy blackberry fruit and peppery kick dance well with sweet-tangy barbecue ribs or a big slab of smoky brisket. As mentioned, Zin‚Äôs moderate tannins and lush profile make it the wine for BBQ sauce-slathered meats Ôøº. Throw some burgers or bratwurst on the grill, slather on your favorite sauce, and let the Zin amplify those flavors. This pairing screams ‚ÄúAll-American cookout‚Äù, and guests will love how the wine‚Äôs boldness matches the fun, casual vibe. Bonus: Zinfandel is typically affordable, so you can have a few bottles on hand for a larger group.
	‚Ä¢	Malbec with Grilled Steak Tips or Chili: Firing up the charcoal for some marinated steak tips or serving a big pot of chili at the game day party? Pour some Argentine Malbec. Its full-bodied dark fruit and smooth finish pair great with grilled beef and the smoky spices in chili con carne. Malbec has enough heft to satisfy red wine lovers and a plushness that goes down easy even if you‚Äôre juggling a paper plate and watching the touchdown replay. It‚Äôs the kind of wine you can enjoy from a red Solo cup (we won‚Äôt tell) and still appreciate that it brings out the best in BBQ brisket or even spicy sausages. If the chili is extra spicy, you might chill the Malbec slightly or, alternately, switch to an off-dry Riesling for those servings ‚Äì but for most barbecue spice levels, Malbec will hold its own Ôøº.
	‚Ä¢	Dry Ros√© or Riesling for Lighter Grilled Fare: Not everyone wants a heavy red at a midday BBQ ‚Äì enter dry ros√© as the refreshing all-rounder. It‚Äôs fantastic with grilled chicken, turkey burgers, or pulled pork sliders, especially if you‚Äôve got a mix of vinegar-based and creamy coleslaw sides. The ros√© chills things down and its acidity and fruit make it a hit with everything from potato salad to hot dogs. Similarly, if your BBQ spread includes spicy buffalo wings or hot links, break out a chilled off-dry Riesling. As noted earlier, a touch of sweetness in the Riesling will rescue your taste buds from the heat Ôøº ‚Äì a real MVP move for game day. These wines keep the atmosphere casual and fun, letting everyone focus on the game (or the grill) while still enjoying a great pairing.

üé© Formal Event or Holiday Dinner

For formal occasions ‚Äì whether it‚Äôs a holiday feast, a business dinner, or a black-tie event ‚Äì you‚Äôll want wines that are classics, with enough sophistication to match the mood (and the multi-course meals). Here are some go-to choices for when you need to impress and satisfy a crowd:
	‚Ä¢	Cabernet Sauvignon or Bordeaux Blend with Prime Rib or Lamb: At a formal sit-down dinner featuring a showstopping roast (prime rib, rack of lamb, beef tenderloin), a top-quality Cabernet Sauvignon or Cabernet-based blend is a surefire hit. These wines are often viewed as prestigious and age-worthy, and their full-bodied flavor complements luxe meats. Pour a Napa Cab or a Bordeaux with that herb-crusted prime rib and watch the magic: the wine‚Äôs tannins will merge with the protein, elevating the tenderness and taste of the meat Ôøº. The savory rosemary/garlic crust on a lamb roast finds an echo in the Cab‚Äôs herbal or spice nuances. This pairing has an air of celebration and tradition ‚Äì perfect for Christmas dinner, a milestone birthday, or a fancy gala. Just be sure to decant the wine in advance so it‚Äôs showing its best when your guests sip (and cite a few pairing facts if you want to really impress, like how ‚Äúthe wine‚Äôs tannins are softened by the lamb‚Äôs fat, and vice versa‚Äù Ôøº).
	‚Ä¢	Chardonnay (Burgundy or High-End New World) with Lobster or Fine Poultry: When the menu features an elegant seafood course (lobster tail, scallops in cream sauce) or a fine poultry dish like truffle roast chicken or Thanksgiving turkey, a high-quality Chardonnay fits the bill. For formal settings, you might choose a white Burgundy (a Premier Cru Chablis or Meursault if within budget) or a respected California Chardonnay. These wines offer a balance of richness and acidity, pairing gracefully with buttery, creamy foods. A classic example: lobster with drawn butter and a Napa Chardonnay ‚Äì the wine‚Äôs opulent texture mirrors the butter, while its citrus and oak notes add complexity. At holiday dinners, a well-made Chardonnay also pleases those guests who prefer white wine, and it complements traditional sides (buttery mashed potatoes, sage stuffing) quite well by matching their weight. It‚Äôs a versatile yet classy choice ‚Äì as one expert put it, ‚Äúunoaked Chardonnay for a simple creamy dish, or a posh white Burgundy if you‚Äôre fancy‚Äù Ôøº. Either way, it elevates the dining experience.
	‚Ä¢	Champagne or Quality Sparkling throughout the Event: Don‚Äôt underestimate Champagne at a formal event ‚Äì not just for toasts, but as a continuous pairing. For a stand-up reception or passed hors d‚Äôoeuvres, Champagne (or an equivalent high-quality brut) is ideal; it pairs with virtually any canap√© and adds an instant sense of occasion. Many formal dinners start with a Champagne toast ‚Äì you can carry that into the first course (Champagne with a caviar-topped tart or a creamy soup can be divine). If the event is a celebration like a wedding, keeping the Champagne flowing keeps the energy celebratory. And at dessert, if it‚Äôs a not-too-sweet course like fruit tart or cheesecake, a brut or slightly off-dry sparkling can work nicely. Sparkling wines are a status symbol of celebration and also incredibly food-friendly, especially with the rich, small bites common at formal events Ôøº. So, for a black-tie gala or New Year‚Äôs Eve ball, stock up on plenty of bubbly. (Tip: For budget-sensitive events, serve a good Cava or American sparkling ‚Äì many guests won‚Äôt know the difference, and you‚Äôll achieve the same elegant atmosphere.)

These mood-based recommendations illustrate how selecting a wine pairing can depend on context. The same Cabernet that‚Äôs perfect at a formal dinner might feel too heavy for a casual BBQ, and the same ros√© that‚Äôs lovely at a picnic might not feel special enough for a black-tie event. By categorizing wines and pairings by occasion, we ensure the recommendations not only taste good, but feel appropriate for the moment.

‚∏ª

Enhancing the Wine Recommendation System

To make our wine and food pairing recommendations even more user-friendly and intelligent, we can implement several features in a recommendation system or app. These features will help tailor suggestions to individual user needs and ensure the recommendations are both relevant and practical. Here‚Äôs how we can enhance the system:

1. User Preference Filtering

Everyone‚Äôs palate is different, so the system should allow filtering based on personal preferences and constraints. Key filters might include:
	‚Ä¢	Wine Type or Color: Users can select red, white, ros√©, or sparkling (or even specific grape varieties). For example, if a user only wants red wines, the system will narrow results to Cabernet, Merlot, Pinot Noir, etc., with their respective food pairings. Likewise, a user could filter for ‚Äúno oak‚Äù whites if they dislike oaky flavors, guiding them toward options like Sauvignon Blanc or unoaked Chardonnay.
	‚Ä¢	Budget Constraints: Although we‚Äôre focusing on $15‚Äì$25 wines here, a user might set a narrower budget (say under $20) or might have a higher range. The filter can adjust recommendations accordingly. For instance, if someone‚Äôs budget max is $18, the system might highlight the value picks (like certain Malbecs or Rieslings on the lower end of the range) and omit a $25 option. Conversely, if a user can spend up to $30, we might include a few premium recommendations adjacent to this range.
	‚Ä¢	Specific Food or Cuisine: A user could input a particular dish (e.g. ‚ÄúBBQ ribs‚Äù or ‚Äúgrilled salmon‚Äù) or cuisine (‚ÄúMexican food‚Äù) they plan to have, and the system will filter pairings that match that query. This ensures they see only the wines that pair with their chosen meal. For example, selecting ‚Äúspicy‚Äù or ‚Äúhot wings‚Äù would surface the off-dry Riesling/Gew√ºrz pairing suggestion, whereas selecting ‚Äústeak‚Äù brings up Cabernet/Malbec options.
	‚Ä¢	Flavor/Body Preferences: Some users might say ‚ÄúI prefer light-bodied wines‚Äù or ‚ÄúI don‚Äôt like sweet wines.‚Äù Filters for wine body (light, medium, full), sweetness (dry, off-dry, sweet), or even flavor profile (fruity, earthy, spicy) can refine the list. If a user indicates they want a light-bodied, dry red, the system will favor Pinot Noir or a light Merlot over a heavy Cab.
	‚Ä¢	Ratings or Quality Level: Although all wines here are good quality, if the system had data on expert ratings or user ratings for each wine, a user might filter for wines rated e.g. 90+ points or ‚Äú4 stars and up‚Äù by user reviews, to ensure they‚Äôre seeing top-notch picks.

How it helps: These filters give users control. Instead of a one-size-fits-all list, the recommendation becomes personalized. A health-conscious user could even filter ‚Äúlow alcohol‚Äù or ‚Äúorganic wines‚Äù if we have that info. Ultimately, preference filtering makes the knowledge base dynamically responsive ‚Äì the user gets a customized pairing suggestion list that fits their palate, budget, and meal plan.

2. Mood & Occasion-Based Suggestions

As we demonstrated in the Mood-Based Pairing section above, categorizing recommendations by occasion can greatly enhance user experience. The system can offer a menu of mood/occasion categories for users to choose from, such as:
	‚Ä¢	‚ÄúRomantic Dinner‚Äù ‚Äì Selecting this might yield a curated list of elegant, intimate pairings (e.g. Pinot Noir with salmon, Champagne with appetizers, maybe a rich chocolate dessert with a ruby Port if we extend beyond the current list). The tone would be wines that are quieter, refined, perhaps a bit luxurious.
	‚Ä¢	‚ÄúCasual BBQ‚Äù ‚Äì This would bring up the Zinfandel, Malbec, ros√©-type suggestions geared towards outdoor grilling and fun gatherings. The system might even show a brief note like ‚ÄúYou selected Casual BBQ ‚Äì try Zinfandel with burgers or chilled ros√© with grilled chicken.‚Äù This sets expectations for a relaxed vibe.
	‚Ä¢	‚ÄúFormal Event‚Äù ‚Äì Yields the recommendations for Cabernets, Chardonnay, and Champagne that suit formal dinners or celebrations. The system could highlight higher-end picks here and note pairings for prime rib, etc., aligning with a fancy menu.
	‚Ä¢	Other Categories: We could include ‚ÄúGame Night‚Äù (for things like wings, pizza and hence recommending Riesling, Syrah, etc.), ‚ÄúWeeknight Dinner‚Äù (maybe quick, easy pairings like a simple pasta with an easy-going Merlot), ‚ÄúVegetarian Meal‚Äù (pairings focusing on veggies, like Sauvignon Blanc with a salad or Pinot Noir with a mushroom dish), ‚ÄúHoliday Feast‚Äù (Thanksgiving or Christmas ‚Äì Pinot Noir, Chardonnay, etc., with turkey or ham), and even ‚ÄúDessert Pairings‚Äù (suggesting perhaps a late harvest Riesling with cheesecake or Moscato with fruit pie, even though our main focus is on savory American foods).

By clicking on a mood, the user essentially gets a pre-filtered experience. This structured approach is intuitive ‚Äì many people think in terms of events (‚ÄúI need a wine for a wedding toast‚Äù or ‚ÄúWhat should I bring to the cookout?‚Äù) rather than specific flavor theory. Presenting recommendations this way makes the knowledge base feel more like a helpful concierge. It also introduces users to pairings they might not have considered (for example, under ‚ÄúMovie Night‚Äù we might suggest ‚ÄúChampagne and popcorn‚Äù which could delight and surprise them Ôøº).

Technically, this is just another layer of filtering/tags, but presented in a friendly, goal-oriented way. It could be implemented as a set of buttons or a drop-down in the app/website where each mood is mapped to certain wine-food entries.

3. Feedback and Learning System

No recommendation system is complete without a feedback loop. This feature allows the system to improve its suggestions over time, based on the user‚Äôs actual experiences and ratings. Here‚Äôs how we can incorporate feedback:
	‚Ä¢	Rating Pairings: After trying a recommendation, users can rate it (e.g. 5-star scale or a simple thumbs-up/down). For instance, a user might rate ‚ÄúCabernet with steak‚Äù 5 stars if they loved it, but only 2 stars for ‚ÄúChardonnay with mac & cheese‚Äù if they found it didn‚Äôt suit their taste. The system collects these ratings.
	‚Ä¢	Refining Future Suggestions: Using the feedback data, the system can adjust which pairings to show more prominently. If the user consistently rates full-bodied reds highly and gives lower scores to white wine pairings, the algorithm will learn to prioritize reds when suggesting new pairings. It might also identify patterns (perhaps the user loves anything with spice and sweetness interplay, as evidenced by high ratings for Zinfandel BBQ and Riesling-spicy pairings) ‚Äì then it can proactively recommend other spicy-friendly pairings. Essentially, it moves from a generic list to a personalized recommendation engine, much like how Netflix suggests shows based on what you liked before.
	‚Ä¢	Feedback on Relevance: We could also allow users to give feedback like ‚ÄúToo expensive‚Äù or ‚ÄúDidn‚Äôt find this wine near me‚Äù or ‚ÄúI don‚Äôt eat this food,‚Äù which helps the system learn more about the user‚Äôs context. For example, if a user indicates they couldn‚Äôt find a suggested wine, the system might toggle a setting to only show widely distributed brands for that user (or prompt them with the API integration to find where to buy). If they say they don‚Äôt eat beef, the system can avoid suggesting steak pairings and focus on other foods.
	‚Ä¢	Community Averages and Comments: Expanding feedback to a broader scale, the system can aggregate ratings to show ‚ÄúMost users loved this pairing‚Äù or highlight top-rated pairings in each category. Community comments (moderated) might add valuable context (e.g., a user notes they tried the ros√© with mac & cheese and found adding a bit of spice to the mac made it even better with the wine). This turns the knowledge base into a living, improving body of wisdom.
	‚Ä¢	Machine Learning Aspect: Over time, with enough data, the system could employ a machine learning model that predicts a user‚Äôs preference. For instance, it might learn that users who enjoy Pinot Noir with salmon also tend to like Chardonnay with roast chicken (just an example pattern). So if a new user comes in and highly rates the Pinot-salmon combo, the system might suggest the Chardonnay-chicken next, even if the user hasn‚Äôt explicitly asked ‚Äì because it ‚Äúlearned‚Äù from similar users. This is collaborative filtering in action.

In short, a feedback system makes the pairing recommendations smarter and more tailored with each interaction. It ensures that over time, the user sees more of what they like, and less of what they don‚Äôt, enhancing satisfaction and engagement. It also helps surface the best pairings overall, so the quality of the knowledge base improves for everyone.

4. Real-Time Availability via Third-Party APIs

A great recommendation isn‚Äôt very useful if the user can‚Äôt actually find the wine. To address that, we integrate third-party APIs like Vivino or Wine-Searcher to check wine availability and additional data:
	‚Ä¢	Availability Check: When the system suggests a specific wine (say, a certain label of Zinfandel), it can query an API to see if that wine is in stock at stores near the user or at major online retailers. Wine-Searcher, for example, has an API (though a pricey one) that provides price listings and store availability for wines Ôøº. By hooking into that, the app could display, ‚ÄúAvailable at Total Wine downtown for $17.99‚Äù next to the recommendation. Vivino‚Äôs API or database could similarly be used; it might not be officially public, but developers have found ways to use it Ôøº. Vivino can provide crowd-sourced info on where users bought a wine and average pricing.
	‚Ä¢	Alternate Suggestions if Unavailable: If the API check finds that a recommended wine is not available in the user‚Äôs region, the system can flag that and suggest a similar wine that is available. For instance, if ‚ÄúXYZ Brand Malbec 2018‚Äù is recommended but not sold nearby, the system might suggest another Malbec of similar style that the API shows in stock (maybe ‚ÄúABC Vineyards Malbec 2019‚Äù) so the user isn‚Äôt left hanging. Essentially, the knowledge base could be dynamically linked to inventory data.
	‚Ä¢	Price Verification: Budget was a consideration, so the API can pull real-time pricing to ensure it‚Äôs in the $15‚Äì$25 range. If a wine‚Äôs price spiked above $25, the system might swap it out or alert the user. Conversely, if a $30 wine is on sale for $24 this week, the system could temporarily include it as it now meets the criteria ‚Äì a nice way to catch deals.
	‚Ä¢	User Reviews and Ratings: Vivino‚Äôs API could supply average user ratings for each wine. Incorporating this, the system can display something like ‚ÄúVivino users rate this 4.2/5.0 (Excellent)‚Äù for additional confidence. It also helps in filtering if the user wants only widely loved wines.
	‚Ä¢	Label Scanning and Input: Another neat integration could be allowing the user to scan a wine label (Vivino‚Äôs mobile app does this) ‚Äì then our system can identify the wine and instantly tell them what foods it pairs with. For example, a user at a store could scan a bottle of Chateau X Merlot, and the app will recognize it (via Vivino‚Äôs database) and show: ‚ÄúThis is a smooth Merlot; here are food pairing ideas from our knowledge base: burgers, meatloaf, BBQ chicken pizza, etc. Ôøº.‚Äù This merges the recommendation system with real-world usage, powered by the API‚Äôs image recognition and wine data.
	‚Ä¢	Technical Note: We would carefully use these APIs to avoid overwhelming the user with too much info. Perhaps a ‚ÄúCheck Availability‚Äù button that pulls data on demand, so the main screen isn‚Äôt cluttered. Privacy and API costs are considerations too ‚Äì Wine-Searcher‚Äôs API is not free Ôøº, so maybe we rely on affiliate programs or the user‚Äôs Vivino app linkage for the heavy lifting.

By integrating third-party data, we add a practical layer to our recommendations. It closes the loop from advice to action: the user finds a pairing idea, and immediately can figure out how to get the wine. This convenience boosts user confidence in the system ‚Äì they know it‚Äôs not just theoretical knowledge, but something they can act on for tonight‚Äôs dinner. It‚Äôs the difference between saying ‚ÄúA Chilean Carm√©n√®re would be great here‚Äù and saying ‚ÄúA Chilean Carm√©n√®re would be great ‚Äì and look, the API shows Concha y Toro Carm√©n√®re is $18 at your local shop, which fits the bill.‚Äù Now the user is empowered to enjoy the pairing with minimal friction.

‚∏ª

Conclusion: By compiling detailed wine profiles and pairing rationales (with attention to acidity, tannin, body, and sweetness) and by implementing user-centric features like preference filters, mood-based categories, feedback loops, and live availability checks, our wine recommendation system becomes both knowledge-rich and user-friendly. Whether someone is grilling burgers in the backyard or planning a romantic anniversary dinner, the system can guide them to a great wine pairing that suits the food and the occasion. Best of all, it learns from each interaction and stays practical by ensuring the recommended bottles are both loved by others and can be found easily. Cheers to enjoying the perfect glass of wine with your next meal!  Ôøº ÔøºHigh-quality wines ($15-$25 range) widely available in American liquor stores and their ideal food pairings:

1. Cabernet Sauvignon: Robust, high tannins, perfect for steak, burgers, and hearty grilled meats. Best for formal dinners or casual BBQs.

2. Malbec: Full-bodied, smooth, pairs excellently with grilled beef, spicy BBQ dishes, chili, and smoked meats. Ideal for casual BBQs and game-day gatherings.

3. Pinot Noir: Light-bodied, low tannins, versatile, pairs with roast chicken, turkey, pork tenderloin, grilled salmon, and mushroom dishes. Excellent for romantic dinners or holiday meals.

4. Merlot: Medium-bodied, smooth, versatile with burgers, meatloaf, grilled pork, roast chicken, or BBQ pizza. Great for everyday dinners and casual gatherings.

5. Sauvignon Blanc: Crisp, high acidity, pairs with salads, seafood, goat cheese, citrusy or herbal dishes. Ideal for brunches, picnics, or light meals.

6. Chardonnay: Medium to full-bodied, buttery or crisp depending on style, excellent with lobster, creamy pastas, buttery chicken, or seafood dishes. Suitable for formal dinners, holiday meals, or creamy seafood dishes.

6. Off-dry Riesling: Slight sweetness balances spicy foods like buffalo wings, spicy BBQ, and spicy Asian dishes. Perfect for casual parties or spicy-food events.

7. Pinot Grigio: Light-bodied, crisp, ideal for lighter seafood dishes, salads, fish tacos, and appetizers. Great for daytime meals and casual lunches.

8. Dry Ros√©: Light-to-medium-bodied, versatile, matches cheesy dishes, charcuterie, grilled seafood, and salads. Excellent for picnics, BBQs, and outdoor gatherings.

9. Brut Sparkling Wine: Effervescent, high acidity, pairs well with salty, fried foods, popcorn, potato chips, and seafood appetizers. Ideal for celebrations, parties, and special occasions.
"""

# Helper Functions

def select_wine(chosen_food):
    conditions = [Style.common == 1]

    pairing_notes = {
        "sweet": "When eating sweet foods, your wine should always be as sweet or sweeter than your food.",
        "spicy": "Look for a lower alcohol wine (<=12%) when eating spicy food. Alcohol accentuates spiciness.",
        "medium_umami": "Lower tannins and fuller body wines match medium umami dishes.",
        "light_umami": "Lean but umami dishes pair best with fuller-bodied whites or lighter reds.",
        "heavy_umami": "Salt balances umami, opening robust, tannic reds as options.",
        "fatty_umami": "Bold, tannic reds pair best with fatty, flavorful foods like steak.",
        "default": "Crisp, acidic wines work well with lighter or fried dishes."
    }

    if chosen_food.sweetness >= 3 and chosen_food.umami <= 2:
        conditions.append(Style.sweetness_value == chosen_food.sweetness)
        pairing_note = pairing_notes["sweet"]
    elif chosen_food.spiciness >= 3:
        conditions += [Style.alcohol_value <= 3, Style.tannins_value <= 2, Style.body_value <= 2, Style.sweetness_value <= 2]
        pairing_note = pairing_notes["spicy"]
    elif chosen_food.umami >= 2 and chosen_food.saltiness <= 3 and chosen_food.fattiness >= 3:
        conditions += [Style.tannins_value <= 2, Style.body_value >= 3, Style.sweetness_value <= 2]
        pairing_note = pairing_notes["medium_umami"]
    elif chosen_food.umami >= 3 and chosen_food.fattiness <= 2:
        conditions += [Style.tannins_value <= 2, Style.body_value <= 2, Style.sweetness_value <= 2]
        pairing_note = pairing_notes["light_umami"]
    elif chosen_food.umami >= 3 and chosen_food.saltiness >= 4:
        conditions += [Style.tannins_value >= 3, Style.body_value >= 3, Style.acidity_value >= 4, Style.sweetness_value <= 2]
        pairing_note = pairing_notes["heavy_umami"]
    elif chosen_food.fattiness >= 4 and chosen_food.umami >= 4:
        conditions += [Style.tannins_value >= chosen_food.fattiness, Style.body_value >= chosen_food.fattiness, Style.sweetness_value <= 2]
        pairing_note = pairing_notes["fatty_umami"]
    else:
        conditions += [Style.acidity_value >= chosen_food.acidity, Style.body_value <= 2]
        pairing_note = pairing_notes["default"]

    wine_results = Style.query.filter(*conditions).order_by(Style.name).all()
    return wine_results, pairing_note

@app.route('/recommend-wine', methods=['POST'])
def recommend_wine():
    data = request.get_json()
    food_name = data.get('food_name')
    mood = data.get('mood', 'neutral')

    if not food_name:
        return jsonify({'error': 'Food name is required.'}), 400

    chosen_food = Food.query.filter_by(name=food_name).first()
    if not chosen_food:
        return jsonify({'error': 'Food not found.'}), 404

    wine_results, pairing_note = select_wine(chosen_food)
    if not wine_results:
        return jsonify({'error': 'No suitable wine found.'}), 404

    primary_wine = random.choice(wine_results)

    prompt = f"Suggest a wine pairing:\nDish: {chosen_food.name}\nMood: {request.json.get('mood', 'neutral')}\nWine: {primary_wine.name}\nAdditional knowledge: {extensive_knowledge}\n"

    messages = [{"role": "system", "content": prompt}]

    response = openai.ChatCompletion.create(model="gpt-3.5-turbo", messages=messages, temperature=0.7)
    recommendation = response.choices[0].message.content

    return jsonify({"recommendation": recommendation, "pairing_note": pairing_note})

if __name__ == '__main__':
    app.run(debug=True)
